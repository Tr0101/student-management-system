{% extends "base.html" %}
{% block title %}üìß G·ª≠i Email th·ªß c√¥ng{% endblock %}
{% block content %}

<style>
  .email-card {
    max-width: 700px;
    margin: 0 auto;
    border: none;
    border-radius: 16px;
    box-shadow: 0 4px 16px rgba(0,0,0,0.05);
    transition: 0.3s ease;
  }
  .email-card:hover {
    transform: translateY(-2px);
  }
  .card-header {
    background: linear-gradient(135deg, #007bff, #00c6ff);
    color: white;
    border-radius: 16px 16px 0 0;
    display: flex;
    align-items: center;
    gap: 10px;
  }
  .card-header i {
    font-size: 1.5rem;
  }
  label {
    font-weight: 500;
  }
  .btn-primary {
    background: linear-gradient(90deg, #007bff, #00c6ff);
    border: none;
    font-weight: 600;
  }
  .btn-primary:hover {
    opacity: 0.9;
    transform: scale(1.02);
  }
  .spinner-border {
    display: none;
    margin-left: 8px;
    width: 1rem;
    height: 1rem;
  }
</style>

<div class="card email-card mt-4">
  <div class="card-header p-3">
    <i class="bi bi-envelope-paper-heart"></i>
    <div>
      <h5 class="mb-0">üìß G·ª≠i Email th√¥ng b√°o</h5>
      <small>Th√¥ng b√°o ƒëi·ªÉm, c·∫£nh b√°o h·ªçc v·ª•, ho·∫∑c th√¥ng tin chung ƒë·∫øn sinh vi√™n</small>
    </div>
  </div>

  <div class="card-body">
    <form method="post" action="{{ url_for('main.send_email_manual') }}" id="emailForm">
      <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"> <!-- CSRF token -->

      <!-- Email -->
      <div class="mb-3">
        <label class="form-label">Email ng∆∞·ªùi nh·∫≠n</label>
        <input type="email" name="email" class="form-control" placeholder="vd: sinhvien@vlu.edu.vn" required>
      </div>

      <!-- M√¥n h·ªçc -->
      <div class="mb-3">
        <label class="form-label">M√¥n h·ªçc</label>
        <input type="text" name="course" class="form-control" placeholder="T√™n h·ªçc ph·∫ßn (tu·ª≥ ch·ªçn)">
      </div>

      <!-- ƒêi·ªÉm -->
      <div class="mb-3">
        <label class="form-label">ƒêi·ªÉm (0 - 10)</label>
        <input type="number" name="grade" step="0.1" min="0" max="10" class="form-control" placeholder="Nh·∫≠p ƒëi·ªÉm n·∫øu c√≥">
      </div>

      <!-- Ti√™u ƒë·ªÅ -->
      <div class="mb-3">
        <label class="form-label">Ti√™u ƒë·ªÅ email</label>
        <input type="text" name="subject" class="form-control" placeholder="V√≠ d·ª•: Th√¥ng b√°o ƒëi·ªÉm m√¥n To√°n">
      </div>

      <!-- N·ªôi dung -->
      <div class="mb-3">
        <label class="form-label">N·ªôi dung email</label>
        <textarea name="body" class="form-control" rows="5" placeholder="Nh·∫≠p n·ªôi dung email t·∫°i ƒë√¢y..." required></textarea>
      </div>

      <!-- N√∫t h√†nh ƒë·ªông -->
      <div class="mt-4">
        <button type="submit" class="btn btn-primary">
          <i class="bi bi-send-fill"></i> G·ª≠i Email
          <div class="spinner-border text-light" role="status"></div>
        </button>
        <a class="btn btn-secondary ms-2" href="{{ url_for('main.index') }}">
          <i class="bi bi-arrow-left-circle"></i> Quay l·∫°i
        </a>
      </div>
    </form>
  </div>
</div>

<script>
  // Khi g·ª≠i form ‚Üí hi·ªán spinner loading
  const form = document.getElementById('emailForm');
  const spinner = document.querySelector('.spinner-border');
  form.addEventListener('submit', () => {
    spinner.style.display = 'inline-block';
  });
</script>

{% endblock %}
